<!DOCTYPE html>
 <html>
   <head>
   </head>
   <body>
    <canvas id="Canvas" width="1200" height="700" style="border:1px solid #000000;"></canvas>
    <script src="js/dat.gui.min.js"></script>
    <script src="js/global.js"></script>
    <script src="js/function.js"></script>
    <script src="js/class.js"></script>
    <script>
      //  animate FPS control
      var fps, fpsInterval, startTime, now, then, elapsed;
      fps = 60;

      //objects
      var pf;  //PlanetFactory
      var ps;  //PlanetSet
      var orbit;  //Orbit
      var draw;  //Draw

      //dat.gui
      var controls;

      main();

      function main(){
        pf = new PlanetFactory(2, MRM);
        ps = pf.createPlanet();

        orbit = new Orbit(ps);

        draw = new Draw(orbit, ps);

        //dat.GUI
        var gui = new dat.GUI();
        controls = new function(){
          this.angluar_ratio = 'Choose';
        }
        gui.add(controls, 'angluar_ratio', ['Choose', '(0.1, 0.9)', '(0.15, 0.85)', '(0.2, 0.8)', '(0.25, 0.75)', '(0.3, 0.7)', '(0.35, 0.65)', '(0.4, 0.6)', '(0.45, 0.55)', '(0.5, 0.5)']).onFinishChange(function(value){
          var a1, a2;
          switch(value){
            case 'Choose':
              break;
            case '(0.1, 0.9)':
              a1 = 0.1; a2 = 0.9;
              break;
            case '(0.15, 0.85)':
              a1 = 0.15; a2 = 0.85;
              break;
            case '(0.2, 0.8)':
              a1 = 0.2; a2 = 0.8;
              break;
            case '(0.25, 0.75)':
              a1 = 0.25; a2 = 0.75;
              break;
            case '(0.3, 0.7)':
              a1 = 0.3; a2 = 0.7;
              break;
            case '(0.35, 0.65)':
              a1 = 0.35; a2 = 0.65;
              break;
            case '(0.4, 0.6)':
              a1 = 0.4; a2 = 0.6;
              break;
            case '(0.45, 0.55)':
              a1 = 0.45; a2 = 0.55;
              break;
            case '(0.5, 0.5)':
              a1 = 0.5; a2 = 0.5;
              break;
          }

          draw.reset();

          ps.setAnGularIncrements(1, a1);
          ps.setAnGularIncrements(2, a2);

          orbit.calculate();
          draw.drawOrbit();
        }).name("Angular Ratio");

        //display();
      }

      function display(){
        fpsInterval = 1000 / fps;
        then = Date.now();
        startTime = then;
        animate();
      }

      function animate(){
        requestAnimationFrame(animate);

        now = Date.now();
        elapsed = now - then;

        if (elapsed > fpsInterval){
          then = now - (elapsed % fpsInterval);
        }
        update();
      }

      function update(){
        //clearCanvas();
      }
     </script>
   </body>
 </html>